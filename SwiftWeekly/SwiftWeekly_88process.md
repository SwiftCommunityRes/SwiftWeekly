## 前言

**本期是 Swift 编辑组自主整理周报的第八十九期**，每个模块已初步成型。各位读者如果有好的提议，欢迎在文末留言。

Swift 周报在 [GitHub 开源](https://github.com/SwiftCommunityRes/SwiftWeekly "SwiftWeekly")，欢迎提交 issue，投稿或推荐内容。目前计划每两周周一发布，欢迎志同道合的朋友一起加入周报整理。

生活从来不是等出来的剧本，而是闯出来的冒险。哪怕步子小一点，慢一点，往前走就好，努力经营当下，惊喜自会如期而至。👊👊👊

> **周报精选**
>
> 新闻和社区：苹果市值首破4万亿美元，美股“4万亿俱乐部”齐聚三巨头
> 
> 提案：
> 
> Swift 论坛：
>
> 推荐博文：
>
>**上期话题结果**


## 话题讨论

## 新闻和社区  

### 苹果市值首破4万亿美元，美股“4万亿俱乐部”齐聚三巨头

2025 年 10 月 29 日

![](https://pics2.baidu.com/feed/a686c9177f3e67096666f381e0972f2df9dc55cf.jpeg@f_auto?token=e2892a736262ba1d05e5612a4769f5e7)

美东时间周二（10 月 28 日），美股市场迎来历史性时刻：苹果公司市值首次突破 4 万亿美元，成为继英伟达、微软之后，第三家迈入“4 万亿美元市值俱乐部”的上市企业。

与此同时，微软早盘一度涨超 4.1%，现涨幅收窄至 2% 附近，市值也位于 4 万亿美元上方。英伟达股价强势上扬，盘中一度涨逾 6%，收盘上涨 4.9%，市值触及 4.94 万亿美元后报 4.89 万亿美元，创下历史新高，市值稳居全球第一。

市场普遍认为，苹果此次市值跃升主要受益于其最新发布的 iPhone17 系列销售强劲。据 Counterpoint Research 数据，iPhone17 在中美市场上市前 10 天的销量较 iPhone16 系列高出 14%，其中标准版在中国市场的销量几乎翻倍。

此外，苹果将于 10 月 30 日公布 2025 财年第四季度财报，市场预计其营收将达 1017 亿美元，净利润约为 260.6 亿美元。投资者对其业绩表现持乐观态度，推动股价持续走高。

微软市值回升，得益于其与人工智能公司 OpenAI 达成的新协议。当地时间 10 月 28 日，微软与 OpenAI 宣布签署新协议，将巩固双方的合作关系。根据协议，微软将持有 OpenAI 营利部门约 27% 的股份，价值约 1350 亿美元。此外，OpenAI 还将额外购买 2500 亿美元的微软 Azure 云服务，进一步加深双方合作。

7 月 9 日，英伟达的市值首次突破 4 万亿美元，成为全球首家 4 万亿美元市值公司。在 AI 芯片领域的垄断地位，使其成为本轮科技股上涨的最大受益者之一。

当地时间 10 月 28 日，在华盛顿特区举行的 GTC 大会成为英伟达新一轮上涨的催化剂。当天，英伟达首席执行官黄仁勋在长达两小时的主题演讲中密集发布技术革新与产业合作计划，覆盖人工智能、量子计算、自动驾驶及通信等领域，显示公司正加速从“AI 芯片制造商”向“计算生态系统平台”转型。

在此次 GTC 大会上，黄仁勋正式发布 NVQLink 互联系统，这项技术可在量子处理器与 AI 超级计算机之间实现高速通信，被他称为“连接量子与经典计算的罗塞塔石碑”。（来源：界面新闻）

### 苹果加速 iOS 广告布局，地图广告最快明年春季上线

2025 年 10 月 27 日

![](https://pics1.baidu.com/feed/0823dd54564e92585549b4fef7bf7f48ccbf4e6a.jpeg@f_auto?token=eba5a3613645e82f496a44879226bc04)

10 月 27 日，据知名科技记者马克·古尔曼 (Mark Gurman) 的最新消息，苹果地图用户最早明年就会在应用中看到广告。

马克·古尔曼在“Power On”通讯中透露，苹果公司正考虑自 2026 年起，在 iOS 26 自带的地图搜索中引入广告，这一举措标志着苹果在 App Store、Apple News 之后，将原生地图纳入核心广告阵地。

据悉，苹果地图广告将采用类似 App Store 的搜索竞价模式，餐厅、线下门店等商家可通过付费获得更高搜索曝光度。不过从目前消息看，地图应用初期可能不会像 App Store 那样在首页展示广告。

据媒体报道，苹果还将利用人工智能技术，以确保搜索结果的相关性和实用性，避免生硬推送。苹果宣称，iOS 的地图界面将优于谷歌地图等竞争对手，为用户带来更好的使用感受。

目前苹果内部已完成方案论证，广告很可能在春季随 iOS 26.4 或 iOS 26.5 系统一同亮相。

据目前爆料消息，地图可能还不会是苹果“广告版图”的终点，苹果图书、博客以及其他第一方程序，未来都有可能植入广告“以产生更多收入”。

早在 2019 年 11 月，摩根大通就曾预测，如果苹果在 Apple TV +和 App Store 上加大广告力度，那么该公司的广告收入将可能以每年 33% 的增速增长，从约 20 亿美元增长至 2025 财年的 110 亿美元。

苹果一直都试图进入广告业务。早在 2010 年，苹果就推出了移动广告平台 iAd。当时乔布斯试图打造一个“不会让用户反感”的广告平台，于是严格规定了广告格及初始100万美元的高门槛（苹果后来降至 50 万美元），这就排除了众多的中小公司。

而在 2022 年 8 月，马克·古尔曼就曾经透露，苹果已经在内部测试了地图中的搜索广告，广告部门在在苹果内部的地位也得到了提升。

与之相比，谷歌 2025 年第二季度广告收入达到 713 亿美元，同比增长 10.4%，主要由搜索广告（541.9亿美元）和 YouTube 广告（97.96 亿美元）驱动。‌

不过，苹果加大广告投入这一举措，也存在潜在风险。部分用户已经对苹果在 iPhone 上不断增加推广内容表示不满，例如 AppleCare+、Apple Music、Apple TV 和 Fitness+ 等服务，认为 ipohne 一定程度上已经成了苹果为自家服务的数字广告牌。而有些消费者不满，购买一部售价高达 2000 美元的苹果手机，还要在上面继续增加广告，苹果公司显得“过于逐利”了。（来源：界面新闻）

### Apple 智能的心脏，苹果美国制造 AI 服务器已提前交付

2025 年 10 月 24 日

科技媒体 Appleinsider 昨日（10 月 23 日）发布博文，报道称苹果公司已提前开始向其全美数据中心，交付休斯顿工厂生产的 AI 服务器。这一里程碑事件标志着苹果在扩大其生态内 AI 能力的同时，正积极推动其高科技制造业回流美国。

![](https://pics6.baidu.com/feed/d50735fae6cd7b898381ca4c569bebb7db330e5b.jpeg@f_auto?token=055f1a8d84443ffc69e580464f4fdda5)

这些服务器是专为驱动“Apple 智能”（Apple Intelligence）而设计，将成为处理苹果最新 AI 功能所需安全云端计算任务的骨干网络。苹果首席运营官萨比・汗（Sabih Khan）在接受福克斯新闻数字频道采访时确认了这一进展，他表示：

我们很高兴能从休斯顿工厂运送美国制造的先进服务器。作为我们对美 6000 亿美元投资承诺的一部分，这些服务器将被安装在我们的数据中心，并通过“私有云计算”技术在支持“Apple 智能”方面发挥关键作用。

这项投资最初于 2025 年 2 月宣布，当时承诺的投资额为 5000 亿美元（IT之家注：现汇率约合 3.55 万亿元人民币）。随后，公司在宣布“美国制造计划”时，又追加了 1000 亿美元投资，让总额达到 6000 亿美元（现汇率约合 4.26 万亿元人民币）。

![](https://pics4.baidu.com/feed/f703738da9773912701ef26da2a62f08377ae2d6.jpeg@f_auto?token=d591ab5487ad03f2e8fcb7e293483c68)

萨比・汗补充说：“我们的团队出色地加速了工作进度，让休斯顿新工厂得以提前投产。我们计划明年继续扩建该工厂，以提高产量。”

这些在休斯顿制造的服务器一个关键特性是“极其节能”。随着 AI 工作负载导致数据中心功耗急剧增加，高能效已成为至关重要的因素。这一特性不仅能有效控制运营成本，更有助于苹果在持续扩展“苹果智能”服务至数百万台设备的同时，稳步推进其 2030 年实现碳中和的环保目标。（来源：IT之家）

## 提案


## Swift论坛
1、讨论[介绍Swift Erlang Actor System：构建类 Erlang 的分布式 Actor 模型](https://forums.swift.org/t/introducing-swift-erlang-actor-system/81248 "介绍Swift Erlang Actor System：构建类 Erlang 的分布式 Actor 模型")
该帖介绍了一个全新的开源项目：Swift Erlang Actor System，灵感来自 Erlang 的并发与容错模型，旨在为 Swift 带来轻量、可分布式、可监督的 Actor 架构。

核心特性包括：
•	类似 Erlang 的 actor 结构，每个 actor 是独立的轻量线程，拥有唯一标识
•	支持**消息发送 (tell) 和异步请求 (ask)**模式
•	支持actor 监控与监督树 (supervision)，自动重启失败子 actor
•	支持在本地或远程集群运行多个 actor 系统（基于 NIO）
•	可自定义调度器与行为定义，支持高扩展性

示例：
```Swift
struct Greeter: Behavior {
  func receive(context: ActorContext, message: String) async throws {
    print("Hello, \(message)!")
  }
}

// 创建系统与 actor
let system = ActorSystem()
let greeter = try await system.spawn(name: "greeter", behavior: Greeter())
await greeter.tell("Swift")
```

设计目标并非替代 Swift 原生 actor 类型，而是提供类似 Akka/Erlang 的高阶抽象：关注 actor 间通信与容错结构，而非仅数据隔离。特别适用于构建长生命周期的服务端组件、聊天系统、游戏服务器或微服务框架。

社区反馈积极，许多开发者对该系统如何与 Swift 并发原语（如原生 actor、Task）协同工作提出兴趣，也有人提到可作为 Swift 分布式计算生态的重要尝试。该项目仍处于早期阶段，作者欢迎社区贡献与反馈。

2、讨论[项目进展GSoC 2025：改进 Swift 测试框架的控制台输出](https://forums.swift.org/t/gsoc-2025-progress-feedback-request-for-an-improved-swift-testing-console-output/81214 "项目进展GSoC 2025：改进 Swift 测试框架的控制台输出")

该帖由 Google Summer of Code 2025 学生项目参与者 @Aditya_Narayan 发布，展示了其正在进行的项目成果：改进 Swift Package Manager 测试输出的可读性和信息丰富性，并征求社区反馈。

目前的 Swift 测试输出风格较为简洁，缺乏清晰的视觉分隔和上下文提示，特别在大型测试套件中，开发者难以快速定位失败信息。该项目的目标是提供更结构化、更具可视层级的控制台输出体验。

核心改进包括：
•	更清晰的测试生命周期提示（测试开始、成功、失败等）
•	颜色高亮（例如绿色表示通过，红色表示失败）
•	缩进与层次结构：使测试组与测试用例输出更具结构感
•	支持环境变量启用增强格式，保持默认行为向后兼容

示例输出（简化）：
```Swift
Running test suite MyPackageTests

✓ MathTests.testAddition
✓ MathTests.testSubtraction
𐄂 MathTests.testDivisionByZero
  → Error: Division by zero

Test run finished:
✓ 2 passed
𐄂 1 failed
```
该项目计划在 SwiftPM 中实现完整集成，目前处于开发中期阶段，作者欢迎社区提出 UI、功能和行为上的反馈建议。

此项工作有望提升 Swift 开发者的测试体验，特别在 TDD 和 CI 场景下提供更高效的问题定位能力。社区普遍鼓励并支持该方向，部分成员提出增加自定义 formatter 和可配置输出级别等建议。

3、提议[预提议基于数据依赖的测试串行化机制](https://forums.swift.org/t/pre-pitch-data-dependent-test-serialization/81251 "预提议基于数据依赖的测试串行化机制")
该帖提出一个早期想法，旨在改进 Swift 测试执行模型：允许基于数据依赖关系对测试进行自动串行化（Serialization），以解决测试间共享资源时可能出现的竞争条件或不确定行为。

当前 SwiftPM 的测试运行机制默认高度并发，在某些情况下会导致如下问题：
•	多个测试访问相同的数据库、文件系统或全局状态，产生冲突
•	开发者只能通过全局串行化（例如 --parallel false）或人为组织测试文件回避问题，这既不理想也不具扩展性

该预提议设想一种声明式机制，允许测试指定其资源依赖，例如：
```Swift
@SharedResource("UserDefaults")
func testUsesUserDefaults() {
  ...
}
```
SwiftPM 可据此自动将共享同一资源的测试用例串行执行，而无冲突的测试仍可并发运行，从而在并发性与正确性之间取得平衡。

目前该想法尚未形成完整 pitch，作者希望征求社区意见，包括：
	•	是否存在类似需求场景？
	•	最合适的声明方式是什么？属性宏？测试注解？测试分组？
	•	是否应由 SwiftPM 或 XCTest 层来实现？

社区反馈积极，多数人认同该提议对中大型项目及集成测试尤为重要，也有人提到类似机制在其他测试框架（如 pytest fixtures）中已有良好实践。该方向有望在未来形成正式提案，提升 Swift 测试系统的灵活性与可靠性。

4、提议[提议用 repo 工具替代 update-checkout 脚本管理 Swift 项目依赖](https://forums.swift.org/t/pitch-replacing-the-update-checkout-script-with-repo/81182 "提议用 repo 工具替代 update-checkout 脚本管理 Swift 项目依赖")
该提议建议用 Google 的 repo 工具替代当前维护 Swift 工程多仓库依赖的 update-checkout 脚本。update-checkout 是当前 Swift 社区用于同步 Swift 项目主仓库（如 swift, llvm-project, swift-tools-support-core 等）的一种 Bash 脚本，但随着依赖图复杂度上升，其维护变得困难且不易扩展。

提议中指出，repo 工具具备以下优势：
•	更强的多仓库版本协调与同步能力（通过 manifest.xml）
•	跨平台兼容，支持 Linux 与 macOS
•	能够追踪特定 commit，而非仅使用 branch
•	已广泛应用于 Android 等大型开源项目中，生态成熟

一个典型的 repo manifest 可能如下所示：
```xml
<manifest>
  <remote name="github" fetch="https://github.com/apple/" />
  <project name="swift" path="swift" revision="main" />
  <project name="llvm-project" path="llvm-project" revision="main" />
  ...
</manifest>
```
若该提议被采纳，Swift 项目贡献者在初次设置与同步多个仓库时，将可通过简单命令获取所有组件：
```bash
repo init -u https://github.com/apple/swift-manifest
repo sync
```
社区讨论重点集中在工具引入的额外依赖、是否适用于所有平台开发者、与现有 CI/CD 系统的集成难度等方面。有成员建议可以并行支持两种机制过渡一段时间，或将 repo 工具集成进更高层的开发脚本中以隐藏复杂性。

总体来说，该提议被认为是迈向更可维护和现代化工程管理的潜在步骤，尤其对于频繁参与 Swift 项目源码开发的工程师来说更具意义。

5、讨论[讨论标准库 Concurrency 模块中互斥锁的使用现状](https://forums.swift.org/t/use-of-mutex-within-the-stdlibs-concurrency-module/81191 "讨论标准库 Concurrency 模块中互斥锁的使用现状")
该帖由社区成员发起，探讨 Swift 标准库 Concurrency 模块内部使用互斥锁（mutex）的具体原因与影响，尤其在 Swift 强调无锁并发（如基于任务、actor 等模型）的背景下，这种设计引发了一定疑问。

提问集中于以下几点：
•	Swift 的并发系统是否仍依赖传统互斥锁？
•	使用锁的部分是否对性能或可扩展性构成瓶颈？
•	是否考虑使用 lock-free 数据结构或调度机制替代？

Swift 核心开发者 @Philippe_Hausler 做出回应，指出：
•	确实存在互斥锁使用，但仅限于必要场景，如保护底层任务调度器的数据结构、执行器管理等
•	某些数据结构（如运行队列或调度表）在多线程高并发环境下仍需锁保护，以避免竞态条件
•	Swift 并发的高层抽象（如 async let、Task、actor）本质上是无锁或封装锁机制，开发者通常无需直接接触锁

总结来看，虽然 Swift Concurrency 强调结构化并发与数据隔离，但在标准库底层实现中，为了性能与正确性，适当使用互斥锁仍属合理工程权衡。这一实现细节对最终用户影响极小，主要关注点是正确性、安全性与可维护性。

社区对此表示理解，同时也鼓励未来继续探索 lock-free 或更优化的数据结构，以充分发挥 Apple Silicon 等多核平台的潜力。

## 推荐博文

[SwiftUI 中 View 之间的通信 【macOS App】](https://juejin.cn/post/7406641064914944052/ "SwiftUI 中 View 之间的通信 【macOS App】")

**摘要：** 这篇博客探讨了 SwiftUI 中视图之间的通信方式，并与前端框架如 Vue 和 React 进行对比。文章首先介绍了父视图传递消息给子视图的方式，类似于 Vue 的 props，但使用方法有所不同。接着，文章讲述了子视图如何向父视图传递消息，分别介绍了使用 @Binding、闭包（Closure）回调函数、以及共享 Observable 数据的方式。最后，文章讨论了在多层级视图间使用环境变量传递消息的方式，类似于 Vue 的 Inject/Provide 和 React 的 context。作者总结认为，尽管 SwiftUI 提供了多种视图通信方式，但其灵活性和易用性与前端框架相比仍有所不足，尤其是在复杂场景下依然需要结合使用 Combine。

[iOS - 渲染原理](https://juejin.cn/post/7078881864030617607 "iOS - 渲染原理")

**摘要：**  文章详细介绍了 iOS 中的渲染原理。首先，讲解了图像渲染流水线的步骤，包括应用处理阶段、几何处理阶段、光栅化阶段和屏幕成像。接着，讨论了渲染流水线可能引发的问题，如屏幕撕裂和掉帧，并提出了解决方法。
  
然后，介绍了 iOS 中的渲染框架，包括 CALayer 和 Core Animation ，以及它们在渲染流程中的作用。最后，详细解释了 Core Animation 渲染的全流程，包括事件处理、布局、绘制、打包和显示等步骤。整篇文章深入浅出地介绍了 iOS 中的渲染原理和相关框架，对理解iOS应用的图像渲染过程具有一定的帮助。

[优先级翻转 (Priority Inversion) ](https://juejin.cn/post/7394788843206721587/ "优先级翻转 (Priority Inversion) ")

**摘要：**  本文深入探讨了多线程编程中的优先级翻转现象，特别是在 Swift 中通过 Quality of Service (QoS) 管理任务优先级的重要性。优先级翻转可能导致高优先级任务被低优先级任务阻塞，从而影响系统性能和稳定性。文章通过案例分析和解决方法提供了应对优先级翻转的实用建议，强调了合理使用锁和同步机制的重要性，以及如何通过调整任务优先级来优化多线程应用的设计。


## 话题讨论


## 关于我们

**Swift社区**是由 Swift 爱好者共同维护的公益组织，我们在国内以微信公众号的运营为主，我们会分享以 **Swift实战**、**SwiftUl**、**Swift基础**为核心的技术内容，也整理收集优秀的学习资料。

欢迎关注公众号:Swift社区，后台点击进群，可以进入我们社区的交流讨论群。希望我们Swift社区是大家在网络空间中的另一份共同的归属。

<img width="500" alt="Swift社区" src="https://user-images.githubusercontent.com/24238160/132703149-34121c6c-fd18-491c-a697-58a0fabf3060.png">

特别感谢 Swift社区 编辑部的每一位编辑，感谢大家的辛苦付出，为 Swift社区 提供优质内容，为 Swift 语言的发展贡献自己的力量。
