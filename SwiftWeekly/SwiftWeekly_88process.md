## 前言

**本期是 Swift 编辑组自主整理周报的第八十九期**，每个模块已初步成型。各位读者如果有好的提议，欢迎在文末留言。

Swift 周报在 [GitHub 开源](https://github.com/SwiftCommunityRes/SwiftWeekly "SwiftWeekly")，欢迎提交 issue，投稿或推荐内容。目前计划每两周周一发布，欢迎志同道合的朋友一起加入周报整理。

生活从来不是等出来的剧本，而是闯出来的冒险。哪怕步子小一点，慢一点，往前走就好，努力经营当下，惊喜自会如期而至。👊👊👊

> **周报精选**
>
> 新闻和社区：苹果市值首破4万亿美元，美股“4万亿俱乐部”齐聚三巨头
> 
> 提案：
> 
> Swift 论坛：
>
> 推荐博文：
>
>**上期话题结果**


## 话题讨论

## 新闻和社区  

### 苹果市值首破4万亿美元，美股“4万亿俱乐部”齐聚三巨头

2025 年 10 月 29 日

![](https://pics2.baidu.com/feed/a686c9177f3e67096666f381e0972f2df9dc55cf.jpeg@f_auto?token=e2892a736262ba1d05e5612a4769f5e7)

美东时间周二（10 月 28 日），美股市场迎来历史性时刻：苹果公司市值首次突破 4 万亿美元，成为继英伟达、微软之后，第三家迈入“4 万亿美元市值俱乐部”的上市企业。

与此同时，微软早盘一度涨超 4.1%，现涨幅收窄至 2% 附近，市值也位于 4 万亿美元上方。英伟达股价强势上扬，盘中一度涨逾 6%，收盘上涨 4.9%，市值触及 4.94 万亿美元后报 4.89 万亿美元，创下历史新高，市值稳居全球第一。

市场普遍认为，苹果此次市值跃升主要受益于其最新发布的 iPhone17 系列销售强劲。据 Counterpoint Research 数据，iPhone17 在中美市场上市前 10 天的销量较 iPhone16 系列高出 14%，其中标准版在中国市场的销量几乎翻倍。

此外，苹果将于 10 月 30 日公布 2025 财年第四季度财报，市场预计其营收将达 1017 亿美元，净利润约为 260.6 亿美元。投资者对其业绩表现持乐观态度，推动股价持续走高。

微软市值回升，得益于其与人工智能公司 OpenAI 达成的新协议。当地时间 10 月 28 日，微软与 OpenAI 宣布签署新协议，将巩固双方的合作关系。根据协议，微软将持有 OpenAI 营利部门约 27% 的股份，价值约 1350 亿美元。此外，OpenAI 还将额外购买 2500 亿美元的微软 Azure 云服务，进一步加深双方合作。

7 月 9 日，英伟达的市值首次突破 4 万亿美元，成为全球首家 4 万亿美元市值公司。在 AI 芯片领域的垄断地位，使其成为本轮科技股上涨的最大受益者之一。

当地时间 10 月 28 日，在华盛顿特区举行的 GTC 大会成为英伟达新一轮上涨的催化剂。当天，英伟达首席执行官黄仁勋在长达两小时的主题演讲中密集发布技术革新与产业合作计划，覆盖人工智能、量子计算、自动驾驶及通信等领域，显示公司正加速从“AI 芯片制造商”向“计算生态系统平台”转型。

在此次 GTC 大会上，黄仁勋正式发布 NVQLink 互联系统，这项技术可在量子处理器与 AI 超级计算机之间实现高速通信，被他称为“连接量子与经典计算的罗塞塔石碑”。（来源：界面新闻）

### 苹果加速 iOS 广告布局，地图广告最快明年春季上线

2025 年 10 月 27 日

![](https://pics1.baidu.com/feed/0823dd54564e92585549b4fef7bf7f48ccbf4e6a.jpeg@f_auto?token=eba5a3613645e82f496a44879226bc04)

10 月 27 日，据知名科技记者马克·古尔曼 (Mark Gurman) 的最新消息，苹果地图用户最早明年就会在应用中看到广告。

马克·古尔曼在“Power On”通讯中透露，苹果公司正考虑自 2026 年起，在 iOS 26 自带的地图搜索中引入广告，这一举措标志着苹果在 App Store、Apple News 之后，将原生地图纳入核心广告阵地。

据悉，苹果地图广告将采用类似 App Store 的搜索竞价模式，餐厅、线下门店等商家可通过付费获得更高搜索曝光度。不过从目前消息看，地图应用初期可能不会像 App Store 那样在首页展示广告。

据媒体报道，苹果还将利用人工智能技术，以确保搜索结果的相关性和实用性，避免生硬推送。苹果宣称，iOS 的地图界面将优于谷歌地图等竞争对手，为用户带来更好的使用感受。

目前苹果内部已完成方案论证，广告很可能在春季随 iOS 26.4 或 iOS 26.5 系统一同亮相。

据目前爆料消息，地图可能还不会是苹果“广告版图”的终点，苹果图书、博客以及其他第一方程序，未来都有可能植入广告“以产生更多收入”。

早在 2019 年 11 月，摩根大通就曾预测，如果苹果在 Apple TV +和 App Store 上加大广告力度，那么该公司的广告收入将可能以每年 33% 的增速增长，从约 20 亿美元增长至 2025 财年的 110 亿美元。

苹果一直都试图进入广告业务。早在 2010 年，苹果就推出了移动广告平台 iAd。当时乔布斯试图打造一个“不会让用户反感”的广告平台，于是严格规定了广告格及初始100万美元的高门槛（苹果后来降至 50 万美元），这就排除了众多的中小公司。

而在 2022 年 8 月，马克·古尔曼就曾经透露，苹果已经在内部测试了地图中的搜索广告，广告部门在在苹果内部的地位也得到了提升。

与之相比，谷歌 2025 年第二季度广告收入达到 713 亿美元，同比增长 10.4%，主要由搜索广告（541.9亿美元）和 YouTube 广告（97.96 亿美元）驱动。‌

不过，苹果加大广告投入这一举措，也存在潜在风险。部分用户已经对苹果在 iPhone 上不断增加推广内容表示不满，例如 AppleCare+、Apple Music、Apple TV 和 Fitness+ 等服务，认为 ipohne 一定程度上已经成了苹果为自家服务的数字广告牌。而有些消费者不满，购买一部售价高达 2000 美元的苹果手机，还要在上面继续增加广告，苹果公司显得“过于逐利”了。（来源：界面新闻）

### Apple 智能的心脏，苹果美国制造 AI 服务器已提前交付

2025 年 10 月 24 日

科技媒体 Appleinsider 昨日（10 月 23 日）发布博文，报道称苹果公司已提前开始向其全美数据中心，交付休斯顿工厂生产的 AI 服务器。这一里程碑事件标志着苹果在扩大其生态内 AI 能力的同时，正积极推动其高科技制造业回流美国。

![](https://pics6.baidu.com/feed/d50735fae6cd7b898381ca4c569bebb7db330e5b.jpeg@f_auto?token=055f1a8d84443ffc69e580464f4fdda5)

这些服务器是专为驱动“Apple 智能”（Apple Intelligence）而设计，将成为处理苹果最新 AI 功能所需安全云端计算任务的骨干网络。苹果首席运营官萨比・汗（Sabih Khan）在接受福克斯新闻数字频道采访时确认了这一进展，他表示：

我们很高兴能从休斯顿工厂运送美国制造的先进服务器。作为我们对美 6000 亿美元投资承诺的一部分，这些服务器将被安装在我们的数据中心，并通过“私有云计算”技术在支持“Apple 智能”方面发挥关键作用。

这项投资最初于 2025 年 2 月宣布，当时承诺的投资额为 5000 亿美元（IT之家注：现汇率约合 3.55 万亿元人民币）。随后，公司在宣布“美国制造计划”时，又追加了 1000 亿美元投资，让总额达到 6000 亿美元（现汇率约合 4.26 万亿元人民币）。

![](https://pics4.baidu.com/feed/f703738da9773912701ef26da2a62f08377ae2d6.jpeg@f_auto?token=d591ab5487ad03f2e8fcb7e293483c68)

萨比・汗补充说：“我们的团队出色地加速了工作进度，让休斯顿新工厂得以提前投产。我们计划明年继续扩建该工厂，以提高产量。”

这些在休斯顿制造的服务器一个关键特性是“极其节能”。随着 AI 工作负载导致数据中心功耗急剧增加，高能效已成为至关重要的因素。这一特性不仅能有效控制运营成本，更有助于苹果在持续扩展“苹果智能”服务至数百万台设备的同时，稳步推进其 2030 年实现碳中和的环保目标。（来源：IT之家）

## 提案


## Swift论坛
1、提议[提议改进类型检查器的路线图](https://forums.swift.org/t/roadmap-for-improving-the-type-checker/82952 "提议改进类型检查器的路线图")

该贴由 Slava Pestov 于 2025 年 10 月 30 日发布，概述了 Swift 编译器“表达式类型检查（expression type-checking）”部分的当前已完成工作、正在进行中的改进、以及未来计划。其目标是减少编译器因类型检查“太慢”或“无法在合理时间内完成”而给开发者造成的痛点。  ￼

核心内容

* 贴文首先介绍了类型检查器的基本机制：通过为子表达式引入类型变量、构造约束（如子类型、调用、重载选择等）、使用解约束（constraint solving）过程来确定类型。对“类型基于重载（type-based overloading）”的解释尤为深入。  ￼
* 因为重载带来的“或（disjunction）”约束组合可能呈指数增长，类型检查在最坏情况下算法复杂度极高，因此编译器设定了两类保护机制：每个表达式限制“尝试分支次数（disjunction choice）”与“分配内存规模（arena size）”。超过界限，编译器中止并报错 “the compiler is unable to type-check this expression in reasonable time”。  ￼
* 已完成的改进（Swift 6.2）：通过剖析大型项目和慢表达式发现瓶颈，优化回溯机制、图算法、约束求解 arena 内存使用等。比如某表达式从 ~10 秒下降为 ~6 秒。  ￼
* 正在进行中的改进（main 分支／Swift 6.3 预览）：优化“分支选择算法（disjunction selection）”，使得类型检查器能更快判定选项；优化 arena 使用，使许多表达式从几十秒降至数秒。  ￼
* 未来计划（更为长期）：
* 优化“绑定”逻辑（bindings subsystem），减少与类型变量相关的二次或更高复杂度操作。  ￼
* 移除或简化现存性能「hack」，如针对特定操作符的硬编码优化。  ￼
* 改进“salvage mode”（用于失败后诊断的机制），避免其本身引入性能瓶颈或产生误诊断。  ￼
* 探索语言层面的变化，例如在运算符查找、文字常量推断、以及泛型绑定等方面，为类型检查器减少指数复杂度的触发条件。  ￼

总结

该路线图明确指出，Swift 类型检查器虽已具备合理性能，但在某些极端或大型表达式场景中仍然可能“卡住”或表现不佳。通过一系列工程改进（性能优化、算法重构、约束求解改良）和语言辅助（可能的语法/语言模式改动），Swift 团队旨在显著改善开发者体验。对日常编码、尤其是涉及大量泛型、重载或复杂表达式的代码库而言，这些改进是非常有益的。

2、提议[在 defer 语句中支持异步调用](https://forums.swift.org/t/support-async-calls-in-defer-bodies/81790 "在 defer 语句中支持异步调用")

该提案由 Frederick Kellison‑Linn（论坛用户名 “Jumhyn”）于 2025 年8 月23日发布，旨在允许在 async 上下文中 defer 块内使用 await 调用异步函数。当前 Swift 中，即使函数标记为 async，其 defer 块也不允许出现 await。 ￼

核心内容

* 动机：defer 用于在函数退出时执行清理逻辑（如关闭资源、撤销状态等）。但当清理逻辑本身需要异步操作（例如异步释放、网络日志发送、清理外部系统状态）时，目前无法直接在 defer 中调用 await，开发者只能手动在每个退出点重复调用或启动不受保证完成的 Task。 ￼
* 提议方案：允许在 async 上下文中的 defer 块体内书写 await，且在函数或作用域退出时，编译器隐式 await 所有这些 defer 块中的异步调用，使其在退出前完成。示例如下：
```Swift
func f() async {
  await setUp()
  defer { await performAsyncTeardown() }   // 新支持
  try await doSomething()
}
```
只有当包裹 defer 的函数或闭包是 async 的情况下，这样的 await 才被允许。 ￼

* 源码兼容性：该改动为新增特性，不改变现有语义。现有 defer 块仍然只能同步执行，因此不会破坏兼容性。 ￼
* 替代方案被放弃：提案中讨论了添加 defer async { … } 语法或显式标注 async defer，但认为不必要，因为只要函数为 async 且使用 await，已有语义足够。 ￼

社区反馈

* 多位开发者表达了强烈支持，认为这是“许多场景一直缺少”的功能。例如开发者 Tony Allevato 表示：“我也遇到这个问题，不得不用 Task { … } 绕过，真希望能直接用 await。” ￼
* 讨论中也提出一些细节问题，例如：当多个 defer 块含异步调用时，其执行顺序是否仍为“后进先出”（LIFO）、是否应并行调用或串行 await。开发者倾向认为应保持当前 defer 的逆序串行执行。 ￼
* 对于取消情形 (task cancellation) 和作用域退出时异步 defer 的行为，也有讨论：是否 defer 中的 await 会因取消而跳过？提案暂时假定与现有 async let 的行为类似。 ￼

总结

这项提案为 Swift 的并发语义增加了一个实用且易用的提升 —— 让 defer 清理逻辑也能自然地支持 await。对那些在函数退出时需执行异步清理任务的代码（如日志、资源释放、状态同步）尤其有益。提案遵循语义清晰、兼容性低风险的原则。目前已进入更正式的审查阶段（SE-0493: Support async calls in defer bodies） ￼。如果被采纳，将减少很多样板代码、提高并发 cleanup 场景的安全性与可读性。

3、讨论[介绍Swift SDK for Android](https://forums.swift.org/t/announcing-the-swift-sdk-for-android/82845 "介绍Swift SDK for Android")

该公告由 Swift Android Workgroup 发布于 2025 年10月24日，标志着 Swift 正式推出 Android 平台支持的 SDK 预览版本。 ￼

核心亮点

* SDK 支持在 Android 设备上用 Swift 开发原生代码，用户可在 Windows 安装器中获取，或在 Linux/macOS 上单独下载。 ￼
* 提供 “Getting Started” 指南与 “Swift for Android Examples” 演示仓库，帮助开发者快速将已有 Swift 包迁移到 Android。 ￼
* 强调已有超过 25% 的包库（通过 Swift Package Index）已能构建 Android，一些 UI-无关的核心逻辑可以跨平台复用。 ￼
* 提及 swift‑java 项目（Swift ↔ Java 互操作桥接）已整合，用于 Swift 与 Android 原生 Java/Kotlin 代码的双向绑定。 ￼
* 下一步计划：工作组正在制定“Swift on Android”愿景文档，并建立了项目看板和正式 CI 流程以支持 SDK 的长期发展。 ￼

总结

这次发布是 Swift 向 Android 跨平台生态迈出的关键一步。对于已有 iOS 或 macOS 使用 Swift 的开发者来说，这意味着他们可以用同一语言和工具链向 Android 扩展业务逻辑。虽然当前处于 预览 模式，尚未覆盖全部 UI 框架与工具链成熟度，但其生态兼容性与跨平台潜力是极具意义的。建议你在项目中关注：Swift 包是否标注 Android 兼容、互操作（Swift ↔ Java/Kotlin）桥接方案、以及 Android 环境下 Swift 工具链支持情况。

4、讨论[介绍Swift Configuration](https://forums.swift.org/t/introducing-swift-configuration/82368 "介绍Swift Configuration")

该帖子由 Honza Dvorsky 于 2025 年9 月25日 发布，宣布 Swift Configuration 的初始发行版本。该库旨在为 Swift 应用与库提供统一的配置读取接口，简化不同来源（环境变量、命令行参数、JSON/YAML 文件、内存值）组合使用的场景。  ￼

核心功能如下：

* 使用 ConfigReader(providers: [...]) 创建配置读取器，并可按顺序组合多个配置源，从而实现优先级覆盖机制（如 JSON 默认 → 环境变量覆盖）示例：
```Swift
let config = ConfigReader(providers: [
    EnvironmentVariablesProvider(),
    try await JSONProvider(filePath: "/etc/config.json")
])
let httpTimeout = config.int(forKey: "http.timeout", default: 60)
print(httpTimeout) // 若环境变量 HTTP_TIMEOUT=15，则打印 15  
```  [oai_citation:1‡Swift Forums](https://forums.swift.org/t/introducing-swift-configuration/82368?utm_source=chatgpt.com)  
```

* 支持同步、异步、甚至“热重载（hot-reloading）”的访问模式；支持命名空间/分层（namespacing/scoped readers）、访问日志（access logging）以及敏感值遮蔽（secret redaction）等功能。  ￼
* 内置 Provider 包括环境变量、命令行参数、JSON 和 YAML 文件、内存值；同时开放 ConfigProvider 协议，允许开发者实现并共享自定义来源。  ￼
* 虽然初版为 0.1.0 预发行版，作者提醒对 API 稳定性有要求的库或产品可能要等 1.0 正式版。但鼓励社区尝试并反馈，以塑造 1.0 版本。  ￼

社区反响 &使用建议：

* 多位开发者表示这是 Swift 在服务端配置管理方面“非常需要”的功能扩展。  ￼
* 有用户询问其在 iOS 应用中的适用性，作者确认是可以用于 iOS／SwiftUI 项目，并建议在 App 初始化阶段创建 ConfigReader 并传递至视图层。  ￼
* 有用户关心与 Swift Argument Parser 的集成问题：建议如果只需读取命令行参数，则使用 Argument Parser；如需跨来源组合、库级配置则用 Swift Configuration。  ￼

为何值得关注：

* 对于服务器端、命令行工具、跨平台 Swift 应用而言，配置管理常为“散落”且硬编码的痛点。Swift Configuration 提供了标准化的 API 和扩展机制。
* 如果你的项目或团队正在用 Swift 构建后台服务、工具或库，这个包意味着未来你可以统一配置逻辑、避免重复编写“读取 env → file → args”的样板。
* 初版虽为 0.x，但已被纳入 2025 年10 月的 “What’s New in Swift” 中作为生态亮点：版本 0.2.0 已发布。  ￼

5、讨论[Swift Collections 1.3.0](https://forums.swift.org/t/swift-collections-1-3-0/82429 "Swift Collections 1.3.0")

该版本由 Karoy Lorentey 于 2025 年9 月29 日发布，目标面向 Swift 在“低层系统编程”场景中的容器类型需求，新增多个“拥有权感知（ownership-aware）”的数据结构变体。  ￼

核心新增功能

* 新模块 BasicContainers：包括两种新数组类型
* UniqueArray<Element>：一个**非可复制（noncopyable）**的数组变体，取消 Array 的写时复制机制（copy-on-write），支持存放“非可复制元素”。  ￼
* RigidArray<Element>：更进一步，除了不可复制，还禁止动态扩容。初始化时指定容量，超出后插入视为编程错误。适用于资源受限或延迟敏感场景。  ￼
* 新模块 TrailingElementsModule：提供 TrailingArray，用于 C 风格“紧跟可变尾部存储”的互操作场景。  ￼
* 模块 ContainersPreview：发布实验性类型 Box<T>，一个包装任意值的非可复制、堆分配盒子。  ￼
* 本版支持 Swift 工具链版本 6.0、6.1 和 6.2。  ￼

社区反馈与讨论

* 一位开发者认为 UniqueArray 的命名可能引起误解，初读以为是“唯一元素数组（如 ordered set）”。  ￼
* 核心作者回应：命名经团队反复讨论，决定保留 Unique 前缀，并强调这是一个原型 playground 包，未来若纳入标准库还可能修改。  ￼
* 社区用户提问是否有基准测试（benchmark）比较 Array、UniqueArray、RigidArray。作者回应正在做，但主要用于验证没犯错误，而非追求极致性能差异。  ￼
* 有使用者反映，在他们的场景中反而更多倾向选择 RigidArray，因为他们更看重容量固定和可预测性，而 UniqueArray 动态扩容这一特性反而让他们觉得“中间地带”的吸引力不强。  ￼

总结

Swift Collections 1.3.0 是一次非常针对系统级／嵌入式／性能敏感场景的容器库升级，引入了“不可复制”与“固定容量”两种新维度。对于大多数应用而言，经典 Array 仍足够，但如果你的项目涉及“非可复制元素类型”或对容量与内存行为有严格控制需求（如游戏引擎、图形处理、嵌入式系统），则 UniqueArray 与 RigidArray 提供了有价值的新工具。

## 推荐博文

[SwiftUI 中 View 之间的通信 【macOS App】](https://juejin.cn/post/7406641064914944052/ "SwiftUI 中 View 之间的通信 【macOS App】")

**摘要：** 这篇博客探讨了 SwiftUI 中视图之间的通信方式，并与前端框架如 Vue 和 React 进行对比。文章首先介绍了父视图传递消息给子视图的方式，类似于 Vue 的 props，但使用方法有所不同。接着，文章讲述了子视图如何向父视图传递消息，分别介绍了使用 @Binding、闭包（Closure）回调函数、以及共享 Observable 数据的方式。最后，文章讨论了在多层级视图间使用环境变量传递消息的方式，类似于 Vue 的 Inject/Provide 和 React 的 context。作者总结认为，尽管 SwiftUI 提供了多种视图通信方式，但其灵活性和易用性与前端框架相比仍有所不足，尤其是在复杂场景下依然需要结合使用 Combine。

[iOS - 渲染原理](https://juejin.cn/post/7078881864030617607 "iOS - 渲染原理")

**摘要：**  文章详细介绍了 iOS 中的渲染原理。首先，讲解了图像渲染流水线的步骤，包括应用处理阶段、几何处理阶段、光栅化阶段和屏幕成像。接着，讨论了渲染流水线可能引发的问题，如屏幕撕裂和掉帧，并提出了解决方法。
  
然后，介绍了 iOS 中的渲染框架，包括 CALayer 和 Core Animation ，以及它们在渲染流程中的作用。最后，详细解释了 Core Animation 渲染的全流程，包括事件处理、布局、绘制、打包和显示等步骤。整篇文章深入浅出地介绍了 iOS 中的渲染原理和相关框架，对理解iOS应用的图像渲染过程具有一定的帮助。

[优先级翻转 (Priority Inversion) ](https://juejin.cn/post/7394788843206721587/ "优先级翻转 (Priority Inversion) ")

**摘要：**  本文深入探讨了多线程编程中的优先级翻转现象，特别是在 Swift 中通过 Quality of Service (QoS) 管理任务优先级的重要性。优先级翻转可能导致高优先级任务被低优先级任务阻塞，从而影响系统性能和稳定性。文章通过案例分析和解决方法提供了应对优先级翻转的实用建议，强调了合理使用锁和同步机制的重要性，以及如何通过调整任务优先级来优化多线程应用的设计。


## 话题讨论


## 关于我们

**Swift社区**是由 Swift 爱好者共同维护的公益组织，我们在国内以微信公众号的运营为主，我们会分享以 **Swift实战**、**SwiftUl**、**Swift基础**为核心的技术内容，也整理收集优秀的学习资料。

欢迎关注公众号:Swift社区，后台点击进群，可以进入我们社区的交流讨论群。希望我们Swift社区是大家在网络空间中的另一份共同的归属。

<img width="500" alt="Swift社区" src="https://user-images.githubusercontent.com/24238160/132703149-34121c6c-fd18-491c-a697-58a0fabf3060.png">

特别感谢 Swift社区 编辑部的每一位编辑，感谢大家的辛苦付出，为 Swift社区 提供优质内容，为 Swift 语言的发展贡献自己的力量。
