## 前言

**本期是 Swift 编辑组自主整理周报的第八十一期**，每个模块已初步成型。各位读者如果有好的提议，欢迎在文末留言。

Swift 周报在 [GitHub 开源](https://github.com/SwiftCommunityRes/SwiftWeekly "SwiftWeekly")，欢迎提交 issue，投稿或推荐内容。目前计划每两周周一发布，欢迎志同道合的朋友一起加入周报整理。

眼前的挑战或许险如珠穆朗玛峰，但多年后会发现不过是生命中的丘陵。若你决定灿烂，山无遮，海无拦。👊👊👊

> **周报精选**
>
> 新闻和社区：Apple 宣布首席运营官交接
> 
> 提案：
> 
> Swift 论坛：
>
> 推荐博文：
>
> **话题讨论：** 
> 
> 
>
>**上期话题结果**



## 话题讨论


## 新闻和社区  

### 苹果迟迟不在美国制造iPhone：库克被批

2025 年 7 月 10 日

7 月 10 日消息，美国白宫贸易顾问 Peter Navarro 在接受采访时将矛头指向苹果，批评苹果 CEO 库克未能将苹果的生产业务转移到美国。

Peter Navarro 表示，库克在有意拖延时间，他从未采取实际行动去做这件事，如今有了这么多先进的制造技术，再加上人工智能的发展，在我看来，库克完全可以在美国本土生产 iPhone，如果做不到，这实在令人难以想象。

此前唐纳德·特朗普曾多次表示，苹果有能力在美国制造 iPhone 和其他设备，但行业专家认为这几乎是不可能的。暂且不论搬迁费用以及建设新工厂所需的成本，苹果及其供应商也很难找到足够多具备制造 iPhone 的专业人员。在库克看来，苹果选择在中国生产 iPhone，是因为中国在先进制造领域拥有专业的技术实力。

苹果的零部件来自全球 50 多个国家，即便苹果仅在美国组装 iPhone，并且能找到足够多的熟练工人，美国的生活成本和工资水平也会大幅推高 iPhone 的价格。（来源：快科技）

### Apple 宣布首席运营官交接

2025 年 7 月 9 日

Apple 7 月 9 日宣布 Jeff Williams 将于本月晚些时候卸任首席运营官一职，由 Apple 运营高级副总裁 Sabih Khan 继任。此次人事交接系公司长期规划的领导层继任计划的一部分。Jeff 将继续向 Apple CEO Tim Cook 汇报工作，并管理 Apple 世界级设计团队和 Apple Watch 业务，以及公司的健康相关业务。Jeff 将于今年晚些时候退休，届时 Apple 设计团队将直接向 Cook 汇报。

![](https://img1.gamersky.com/upimg/pic/2025/07/09/small_202507090903055485.jpg)

“Jeff 和我共事多年， Apple 今天的成功离不开他的贡献。他帮助构建了享誉全球的供应链体系；推出了 Apple Watch 并主导其发展；制定了 Apple 的健康战略；以非凡的智慧、热忱和奉献精神领导着我们的世界级设计师团队。”Apple CEO Tim Cook 表示，“他多年来对 Apple 的持续投入和忠诚友情，将令我永远心怀感激。Jeff 留下了宝贵财富，在于他创建的优秀团队。我们会十分想念他，同时他已将未来的工作托付给了出类拔萃的接班人。”

“Sabih 是一位卓越的战略人才，也是 Apple 供应链的核心构建者之一。” Tim 表示，“在管理 Apple 供应链期间，他开拓了先进制造领域的技术创新，负责推动 Apple 在美国制造业务的扩展，并确保公司能灵活应对全球挑战。他推进了公司环保可持续发展的宏伟计划，帮助 Apple 减少了 60% 以上的碳足迹。最重要的是，Sabih 始终以真诚和价值观引领团队，我确信他将成为一位杰出的首席运营官。”

Sabih 已在 Apple 供职 30 年，于 2019 年加入领导团队，担任运营高级副总裁。过去六年，他负责管理 Apple 的全球供应链体系，确保产品质量并监管规划、采购、生产、物流和产品交付等职能，以及 Apple 的供应商责任项目，为全球生产工厂的员工提供保护与培训。他的团队还与供应商合作推进绿色生产，以支持 Apple 的环境倡议，帮助节约资源、保护地球。

![](https://img1.gamersky.com/upimg/pic/2025/07/09/small_202507090903304469.jpg)

在 Apple 任职期间，Jeff 打造的供应链覆盖了美国、中国、印度、日本和东南亚等地，为 Apple 的发展提供支持，并惠及全球用户。他领导的供应商责任计划通过关键的培训和教育项目，提升了全球工人的权益保障标准。Jeff 还对 iPod 和 iPhone 的面世发挥了重要作用。他领导 Apple Watch 项目长达十余年，并制定了公司的健康战略，帮助用户实现更加健康的生活方式、深入了解自身健康状况、获得重要的健康保障。过去几年来，Jeff 还负责管理 Apple 行业领先的设计团队。

“我对 Apple 有着很深的感情。能与公司所有了不起的团队成员共事是我毕生的荣幸。Tim 提供的机遇、鼓舞人心的领导力和多年来的友情更让我心怀感恩。” Jeff 表示，“今年六月是我加入 Apple 的 27 周年，这也是我进入行业的第 40 个年头。从明年开始，我计划花更多时间陪伴家人和朋友，包括五个乃至未来更多的孙辈。我有幸与 Sabih 密切共事了 27 年。在我眼里，他是全世界最优秀的运营管理人才。有了他在来接任这个职位，我对 Apple 的未来充满信心。

1995 年加入 Apple 采购团队之前，Sabih 曾任 GE Plastics 应用开发工程师和重点客户技术负责人。他拥有 Tufts University 经济学与机械工程双学士学位，以及 Rensselaer Polytechnic Institute 机械工程硕士学位。

### 苹果正式提起上诉 反对欧盟5亿欧元的反垄断罚款

2025 年 7 月 7 日

当地时间周一，苹果公司正式对欧盟5亿欧元的罚款提起上诉，称这一处罚是“史无前例的”，且监管机构要求苹果对其应用商店 App Store 收费系统修改是“非法的”。

苹果发布声明称：“今天我们提起上诉，因为我们认为欧盟委员会的决定，以及他们开出的史无前例的罚单，远远超出了法律的范畴。”

“正如我们的上诉所示，欧盟委员会在强行规定我们应如何运营 App Store，并强制执行一些条款，这些条款既让开发者感到困惑，也对用户不利。我们这样做是为了避免惩罚性的每日罚款，并且我们将向法庭陈述事实。”

事件的背景是这样的，今年 4 月份，欧盟委员会根据其《数字市场法》(DMA)规定，宣布对苹果处以 5 亿欧元罚款。不过同时表示，苹果或许可以做出一些改变，以避免罚款。

此前苹果禁止用户通过 App Store 以外的渠道获取优惠，这一做法被欧盟视为限制竞争。

到了 6 月份，苹果对其欧洲应用商店 App Store 政策进行了修改，包括为开发者提供更多途径，引导用户在 App Store 之外购买更优惠的产品。

作为 App Store 修改的一部分，苹果还为欧洲的所有应用程序开发者引入一套新规则，其中包括一项名为“核心技术佣金”的费用，即在 App Store 之外进行的所有数字交易收取 5% 的费用。

苹果表示，欧盟的监管机构要求采用新的分层佣金方式，公司认为这种方法对用户和开发者来说都更令人困惑，没有其他 App Store 受到这种结构的约束。

据悉，欧盟竞争监管机构正在征求应用程序开发商的反馈意见，然后再决定是接受这些变化，还是提出更多要求。

苹果声称，它本不想做出改变，但迫于欧盟委员会的压力不得不进行更新，公司可能面临每天高达 5000 万欧元的罚款。

今年早些时候，加州一名法官裁定，苹果必须允许美国开发者将用户引导至第三方支付平台消费，这可能会导致该公司每年数十亿美元的收入损失。

近年来，欧盟针对美国科技巨头施加了多项高额罚款，包括对谷歌母公司 Alphabet 处以超过 80 亿美元的处罚，以及命令苹果向爱尔兰补缴 130 亿欧元的税款。（来源：财联社）

## 提案


## Swift论坛
1、讨论[提议改进 EncodingError 和 DecodingError 的描述信息](https://forums.swift.org/t/se-0489-improve-encodingerror-and-decodingerrors-printed-descriptions/81021 "提议改进 EncodingError 和 DecodingError 的描述信息")

该提议旨在提升 EncodingError 和 DecodingError 的 description（即打印输出）内容，使其在调试和日志记录时更具可读性和诊断价值。当前，这些错误类型的描述往往过于简略，尤其当涉及嵌套路径或上下文信息时，开发者很难快速定位问题。

现有输出示例：
```Swift
typeMismatch(Swift.String, Swift.DecodingError.Context(codingPath: [CodingKeys(stringValue: "user", intValue: nil)], debugDescription: "Expected String."))
```
改进后的输出示例：
```Swift
Expected to decode String but found Int instead.
- codingPath: user
- debugDescription: Expected String.
- underlyingError: none
```
该提议不会改变错误类型的行为或结构，仅影响它们符合 CustomStringConvertible 协议的输出内容，因此对 ABI 和现有代码无影响。改进后的格式更易读，也更适合日志分析工具。

社区广泛支持该提案，认为这是一个“低风险、高收益”的增强，特别对调试 JSON 解码问题具有实际帮助。提案目前状态为 已接受（Accepted）。

2、讨论[介绍Equatable 宏库：为结构体自动生成 Equatable 以提升 SwiftUI 性能](https://forums.swift.org/t/introducing-equatable-package-that-provides-macros-for-generating-equatable-conformances-for-structs-for-high-performance-swiftui-view-diffing/80924 "介绍Equatable 宏库：为结构体自动生成 Equatable 以提升 SwiftUI 性能")

该帖子介绍了一个名为 Equatable 的新 Swift 包，它通过宏自动生成结构体的 Equatable 实现，旨在显著提升 SwiftUI 的视图 diff 性能。由 Point-Free 团队发布，该库专为 Swift 5.9+ 的宏系统设计，目标是减少手写 == 实现的负担，并避免 @unchecked Sendable 式的隐患。

使用示例非常简单：
```Swift
@Equatable
struct State {
  var count = 0
  var name = ""
}
```
展开后会自动生成：
```Swift
extension State: Equatable {
  static func == (lhs: Self, rhs: Self) -> Bool {
    lhs.count == rhs.count &&
    lhs.name == rhs.name
  }
}
```
优势包括：
•	减少重复样板代码
•	自动追踪结构体成员变更
•	支持嵌套结构与更复杂类型
•	为 SwiftUI 等依赖 Equatable 的性能优化提供基础

社区反响热烈，很多人认为这对 Swift 宏系统是一次实际且极具价值的落地应用，特别适合用在 SwiftUI 状态管理（如 Observable 模型）中。

3、讨论[讨论关于 Swift 支持 Android 的可行性与方向](https://forums.swift.org/t/thoughts-on-swift-for-android/80961 "讨论关于 Swift 支持 Android 的可行性与方向")

该帖子由 Swift 核心成员 @compnerd 发起，探讨 Swift 官方更好地支持 Android 平台的可能路径。虽然 Swift 工具链在 Android 上已可构建使用多年，但目前仍缺乏系统性的支持，主要局限在少数社区驱动的尝试中。

帖子提出几个关键问题：
•	Swift 是否应将 Android 作为一等公民平台进行支持？
•	Swift 标准库和 Foundation 是否应该包含更完善的 Android 支持逻辑？
•	SwiftPM（包管理器）是否应支持交叉编译和 Android 相关配置？
•	是否需要建立 CI 流程验证 Android 构建稳定性？

此外，还讨论了潜在目标：
•	提供 Swift 编写跨平台共享逻辑（iOS + Android）能力
•	为服务器端 Swift 提供 Android 客户端组件
•	在 Kotlin/Java 主导的平台上引入 Swift 编程体验

社区反应积极，许多开发者表达了对在 Android 上用 Swift 进行跨平台开发的兴趣。也有人提出可借鉴 Kotlin Multiplatform 的经验，同时建议聚焦工具链、标准库兼容性和开发者文档改进等优先事项。

该帖目前属于开放性讨论，尚无正式提案，但可能为未来 Swift 在 Android 支持方向的推进打下基础。

4、讨论[讨论Apple Silicon 上 Accelerate 框架与纯 Swift 的性能比较](https://forums.swift.org/t/performance-of-accelerate-framework-vs-swift-on-apple-silicon/80919 "讨论Apple Silicon 上 Accelerate 框架与纯 Swift 的性能比较")

该讨论由开发者发起，探讨在 Apple Silicon（如 M 系列芯片）上使用 Accelerate 框架与纯 Swift 实现在数值计算（如向量加法）方面的性能差异。Accelerate 是 Apple 提供的高性能计算框架，基于底层 SIMD 和硬件优化，但其 API 是 C 接口，使用起来不够 Swifty。

对比测试代码（简化版）：
```Swift
// Accelerate
vDSP_vadd(array1, 1, array2, 1, &result, 1, vDSP_Length(count))
```
```Swift
// Swift
for i in 0..<count {
  result[i] = array1[i] + array2[i]
}
```
一些关键讨论点包括：
•	Accelerate 通常仍比纯 Swift 更快，尤其是在处理大数组和浮点数据时，但差距随着 Swift 编译器优化改进而变小
•	Accelerate 的性能来源包括：SIMD 向量化、内存对齐优化、L1/L2 cache 友好布局
•	Swift 编译器在 release 模式下能生成相当高效的代码，但目前还未总是实现自动向量化
•	对比时应开启编译优化(如 -O) 并考虑架构特异性（M1/M2 的 vector 单元）

部分社区成员建议使用 Accelerate 进行性能关键路径处理，同时将 Swift 封装作为更友好的调用接口。此外，也有人希望 Swift 能更自然地支持向量化与并行计算，以减少依赖 C 框架。

该帖提供了关于 Swift 数值性能在 Apple 平台上的实际表现的重要观察，尤其对高性能计算、图像处理和机器学习开发者具有参考价值。

5、讨论[讨论actor 的设计初衷与使用价值](https://forums.swift.org/t/what-is-the-point-of-having-actor/80908 "讨论actor 的设计初衷与使用价值")

该讨论源于开发者提出的疑问：Swift 中的 actor 关键字是否真的有必要？为何不直接使用现有的 class 搭配 DispatchQueue 或锁来实现线程安全？这引发了社区对 actor 语义、用途和优势的深入讨论。

主要观点包括：
	•	actor 是 Swift 为数据隔离并发模型引入的结构，语义明确，能自动确保内部状态不会被并发访问破坏
	•	与手动加锁或 GCD 相比，actor 更安全、可组合、具备类型系统支持。例如你不能在 actor 外部同步访问其隔离的属性
	•	Swift 的 actor 模型基于串行执行上下文，使得即便内部有可变状态，也不需要显式同步机制

示例：
```Swift
actor Counter {
  var value = 0

  func increment() {
    value += 1
  }
}
```
上述 Counter 的状态操作在并发环境下是安全的，开发者无需考虑竞争条件或死锁问题。

同时也讨论了局限性：
•	actor 成员访问是异步的（需 await），对某些性能敏感场景可能不够轻量
•	actor 不等同于“快速并发”，更像是“安全并发”，主要用途在于状态封装而非高并行度

总体来说，社区共识是：actor 提供了 Swift 原生的、现代化的并发数据保护机制，适合替代容易出错的传统手动同步代码，尤其适合大型项目和团队协作场景。


## 推荐博文

[Foundation Models：苹果设备端模型的边界探索](https://onevcat.com/2025/06/foundation-models/ "Foundation Models：苹果设备端模型的边界探索")

**摘要：** 摘要：在 WWDC 2025中，苹果推出了 Foundation Models 框架，使开发者能够在设备端运行 AI 模型。知名开发者王巍（onevcat）测试显示，经过2-bit量化的3B模型在 iPhone 上运行流畅，推理速度达10–30 tokens/s，内存占用约1–1.5GB。尽管部署时上下文窗口从65K缩减至4096 tokens，并发性能下降，以及 @Generable 宏存在 token 开销等限制，Tool Calling 功能展现出“工具导向编程”的潜力。整体框架稳定，适合摘要、分类等任务，开发者可立即着手探索，尤其关注上下文管理和 Tool Calling 应用。随着苹果持续优化，该框架有望成为 iOS 设备端 AI 的重要基础设施。

[SwiftLog 和 OSLog：选择、使用以及坑](https://onevcat.com/2024/04/swift-log/ "SwiftLog 和 OSLog：选择、使用以及坑")

**摘要：** iOS 开发中，SwiftLog和OSLog是两大主流日志框架。 SwiftLog 适合跨平台和需要自定义后端的场景，而 OSLog 作为苹果原生方案，在性能和系统集成上更胜一筹，是 Apple 平台开发的首选。

相比简单的 print 语句，这两个框架提供了日志分级、元数据记录和隐私保护等关键功能。使用 OSLog 时，通过 Logger 实例可以方便地记录不同级别的日志，并利用 Console.app 进行高级过滤和分析。

实际使用中需要注意一些细节：框架中的日志可能丢失源代码定位信息， OSLogStore 的部分功能存在限制，以及在异步代码中要注意避免意外的对象生命周期延长。

对于纯 Apple 平台开发，推荐直接使用 OSLog；需要跨平台或特殊需求时， SwiftLog 是更好的选择。合理使用这些现代日志框架能显著提升应用的调试效率和运行性能。

[深入探究 iOS 中 UIImage 的图像截取与拉伸技术](https://blog.csdn.net/weixin_30820933/article/details/147524801/ "深入探究 iOS 中 UIImage 的图像截取与拉伸技术")

**摘要：** 这篇文章深入探讨了iOS开发中UIImage类的图像处理技术，重点介绍了两种关键方法： stretchableImageWithLeftCapWidth: 和 resizableImageWithCapInsets: 。

文章首先概述了 UIImage 的基本功能，包括图像加载、属性获取、变换和处理等。然后详细解析了两种图像拉伸方法：
 stretchableImageWithLeftCapWidth: 方法通过设置左侧和顶部不变区来实现单向拉伸，适用于简单场景。
 resizableImageWithCapInsets: 方法则更灵活，允许开发者定义上下左右四个边缘的不变区，支持多方向拉伸。
文章通过具体代码示例展示了两种方法的使用方式，并比较了它们的适用场景和优缺点。此外，还介绍了如何结合这两种方法优化图像处理，以及在实际开发中的应用案例和性能优化建议。


## 话题讨论


## 关于我们

**Swift社区**是由 Swift 爱好者共同维护的公益组织，我们在国内以微信公众号的运营为主，我们会分享以 **Swift实战**、**SwiftUl**、**Swift基础**为核心的技术内容，也整理收集优秀的学习资料。

欢迎关注公众号:Swift社区，后台点击进群，可以进入我们社区的交流讨论群。希望我们Swift社区是大家在网络空间中的另一份共同的归属。

<img width="500" alt="Swift社区" src="https://user-images.githubusercontent.com/24238160/132703149-34121c6c-fd18-491c-a697-58a0fabf3060.png">

特别感谢 Swift社区 编辑部的每一位编辑，感谢大家的辛苦付出，为 Swift社区 提供优质内容，为 Swift 语言的发展贡献自己的力量。
